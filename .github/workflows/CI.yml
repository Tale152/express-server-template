name: Continuous integration

on:
  push:
    branches: [ '**' ]
  pull_request:
    branches: [ '**' ]

permissions:
  pull-requests: write
  contents: write

jobs:

  lint:
    name: Automatic lint and commit
    if: github.actor != 'dependabot[bot]' || github.actor != 'dependabot-preview[bot]'
    uses: Tale152/express-server-template/.github/workflows/reusable-lint-and-commit.yml@master

  test:
    name: Execute tests
    needs: lint
    if: github.actor != 'dependabot[bot]' || github.actor != 'dependabot-preview[bot]'
    uses: Tale152/express-server-template/.github/workflows/reusable-test-matrix.yml@master

  cpd:
    name: Execute cpd
    needs: lint
    if: github.actor != 'dependabot[bot]' || github.actor != 'dependabot-preview[bot]'
    uses: Tale152/express-server-template/.github/workflows/reusable-cpd.yml@master
